#!/usr/bin/env python

from flask import request, send_from_directory
from ztp_flask import app, manager
from ztp_celery import do_this_thing



@app.route('/api/config0/nxos')
def nxos_bootconf():
    return send_from_directory('static', 'nxos-config0.conf')


@app.route('/api/register/nxos', methods=['POST'])
def nxos_register():
    from_ipaddr = request.remote_addr
    do_this_thing.delay(os_name='nxos', ip_addr=from_ipaddr)
    return "OK"


if '__main__' == __name__:
    manager.run()